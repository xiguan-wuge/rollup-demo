<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rollup é™æ€èµ„æºå¤„ç†æ¼”ç¤º</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }

        .demo-section {
            margin: 20px 0;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 8px;
            background: #f9f9f9;
        }

        .image-demo {
            display: flex;
            align-items: center;
            gap: 20px;
            margin: 10px 0;
        }

        .image-demo img {
            border: 1px solid #ccc;
            border-radius: 4px;
        }

        .code-block {
            background: #f4f4f4;
            padding: 10px;
            border-radius: 4px;
            font-family: monospace;
            font-size: 12px;
            overflow-x: auto;
            margin: 10px 0;
        }

        .info {
            background: #e7f3ff;
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
        }
    </style>
</head>

<body>
    <h1>ğŸ¯ Rollup é™æ€èµ„æºå¤„ç†æ¼”ç¤º</h1>

    <div class="demo-section">
        <h2>ğŸ“‹ åŠŸèƒ½è¯´æ˜</h2>
        <p>è¿™ä¸ªæ¼”ç¤ºå±•ç¤ºäº†æˆ‘ä»¬çš„ Rollup é…ç½®å¦‚ä½•å¤„ç†ä¸åŒç±»å‹çš„é™æ€èµ„æºï¼š</p>
        <ul>
            <li><strong>å°æ–‡ä»¶ï¼ˆâ‰¤50KBï¼‰</strong>ï¼šè‡ªåŠ¨å†…è”ä¸º base64 æ•°æ®URI</li>
            <li><strong>å¤§æ–‡ä»¶ï¼ˆ>50KBï¼‰</strong>ï¼šå¤åˆ¶åˆ° assets ç›®å½•ï¼Œè¿”å›å¸¦å“ˆå¸Œçš„æ–‡ä»¶è·¯å¾„</li>
        </ul>
    </div>

    <div class="demo-section">
        <h2>ğŸ–¼ï¸ èµ„æºå±•ç¤º</h2>
        <div class="image-demo">
            <div>
                <h3>å¤§å›¾ç‰‡ï¼ˆå¤åˆ¶åˆ° assets ç›®å½•ï¼‰</h3>
                <img id="largeImage" alt="å¤§å›¾ç‰‡" style="max-width: 200px; max-height: 200px;">
                <div class="info">
                    <strong>å¤„ç†æ–¹å¼ï¼š</strong>æ–‡ä»¶å¤åˆ¶ + å“ˆå¸Œæ–‡ä»¶å<br>
                    <strong>ä¼˜åŠ¿ï¼š</strong>é¿å…å¤§æ–‡ä»¶å½±å“æ‰“åŒ…ä½“ç§¯
                </div>
            </div>
            <div>
                <h3>å°å›¾æ ‡ï¼ˆå†…è”ä¸º base64ï¼‰</h3>
                <img id="smallIcon" alt="å°å›¾æ ‡" style="width: 100px; height: 100px;">
                <div class="info">
                    <strong>å¤„ç†æ–¹å¼ï¼š</strong>base64 å†…è”<br>
                    <strong>ä¼˜åŠ¿ï¼š</strong>å‡å°‘HTTPè¯·æ±‚ï¼Œç›´æ¥å¯ç”¨
                </div>
            </div>
        </div>
    </div>

    <div class="demo-section">
        <h2>ğŸ“ æºä»£ç </h2>
        <h3>å…¥å£æ–‡ä»¶ (src/index.js)</h3>
        <div class="code-block">
            const img = require('./default.png'); // å¤§æ–‡ä»¶ï¼Œä¼šè¢«å¤åˆ¶åˆ°assetsç›®å½•
            const testIcon = require('./test.svg'); // å°æ–‡ä»¶ï¼Œä¼šè¢«å†…è”ä¸ºbase64
            import { switchImg } from './switch/index';
            export { img, testIcon, switchImg };
        </div>
    </div>

    <div class="demo-section">
        <h2>ğŸ”§ æ‰“åŒ…ç»“æœ</h2>
        <h3>ç”Ÿæˆçš„æ–‡ä»¶å†…å®¹</h3>
        <div class="code-block">
            // å¤§å›¾ç‰‡ï¼šè¿”å›æ–‡ä»¶è·¯å¾„
            const img = "./assets/default.a25b3312e2688a1a.png";

            // å°å›¾æ ‡ï¼šè¿”å› base64 æ•°æ®URI
            const testIcon =
            "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cmVjdCB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgZmlsbD0iIzAwN2JmZiIvPgogIDx0ZXh0IHg9IjUwIiB5PSI1NSIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjE0IiBmaWxsPSJ3aGl0ZSIgdGV4dC1hbmNob3I9Im1pZGRsZSI+VGVzdDwvdGV4dD4KPC9zdmc+Cg==";
        </div>
    </div>

    <div class="demo-section">
        <h2>âš™ï¸ é…ç½®é€‰é¡¹</h2>
        <div class="code-block">
            requireAssetsPlugin({
            inline: true, // å¯ç”¨å†…è”
            limit: 50 * 1024, // 50KB ä»¥ä¸‹å†…è”ä¸º base64
            outputDir: 'dist/assets',
            publicPath: './assets/'
            })
        </div>
    </div>

    <script type="module">
        // å¯¼å…¥æ‰“åŒ…åçš„æ¨¡å—
        import { img, testIcon, switchImg } from './dist/index.esm-browser.js';

        // æ˜¾ç¤ºå›¾ç‰‡
        document.getElementById('largeImage').src = img;
        document.getElementById('smallIcon').src = testIcon;

        // è¾“å‡ºåˆ°æ§åˆ¶å°
        console.log('å¤§å›¾ç‰‡è·¯å¾„:', img);
        console.log('å°å›¾æ ‡base64:', testIcon.substring(0, 50) + '...');
        console.log('åˆ‡æ¢å›¾ç‰‡å‡½æ•°:', switchImg);

        // æµ‹è¯•åˆ‡æ¢å›¾ç‰‡åŠŸèƒ½
        const switchBtn = document.createElement('button');
        switchBtn.textContent = 'åˆ‡æ¢å›¾ç‰‡';
        switchBtn.onclick = () => {
            const newImg = switchImg();
            console.log('newImg', newImg);
            const dom = document.getElementById('largeImage')
            dom.src = newImg;
            console.log('åˆ‡æ¢åˆ°:', newImg);
        };
        document.querySelector('.demo-section:nth-child(3)').appendChild(switchBtn);
    </script>
</body>

</html>